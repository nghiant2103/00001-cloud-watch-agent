[
{
	"uri": "/vi/",
	"title": "CloudWatch Agent",
	"tags": [],
	"description": "",
	"content": "Cấu hình Amazon CloudWatch Agent Tổng quan Trong buổi thực hành này, bạn sẽ khám phá các khái niệm cơ bản và học cách cấu hình Amazon CloudWatch Agent để thu thập logs và metrics với độ phân giải cao từ các EC2 instance. Sau đó, bạn sẽ sử dụng CloudWatch để giám sát dữ liệu và nhật ký đã thu thập.\nNội dung Giới thiệu Chuẩn bị Cài đặt và cấu hình CloudWatch Agent trên EC2 Cấu hình phân giải cao Giám sát và phân tích trong CloudWatch Dọn dẹp tài nguyên "
},
{
	"uri": "/vi/3-install-config-cwagent/3.1-install-cwagent/",
	"title": "Cài đặt CloudWatch Agent",
	"tags": [],
	"description": "",
	"content": "1. Kết nối đến EC2 Instance Sử dụng khóa riêng được liên kết với EC2 instance của bạn để kết nối qua SSH. Thay your-ec2-instance-public-ip bằng địa chỉ IP công cộng hoặc DNS của phiên bản EC2 và your-private-key.pem bằng đường dẫn đến tệp khóa riêng của bạn:\nssh -i \u0026#34;your-private-key.pem\u0026#34; ec2-user@your-ec2-instance-public-ip 2. Tải gói CloudWatch Agent Cập nhật trình quản lý gói trên EC2 instance của bạn\nsudo yum update -y Tải xuống gói CloudWatch Agent bằng lệnh sau:\nsudo wget https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm 3. Cài đặt CloudWatch Agent sudo rpm -U ./amazon-cloudwatch-agent.rpm Bước tiếp theo, chúng ta sẽ cấu hình Cloudwatch Agent trong EC2 instance.\n"
},
{
	"uri": "/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "CloudWatch Agent CloudWatch Agent là một gói phần mềm hoạt động tự động và liên tục trên máy chủ của bạn. Sử dụng CloudWatch Agent, chúng ta có thể thu thập các metrics và logs từ máy chủ Amazon Elastic Compute Cloud (Amazon EC2), hybrid và on-premises chạy cả trên hệ điều hành Linux và Windows. CloudWatch Agent cung cấp truy cập vào các số liệu và chỉ số cấp hệ thống nhiều hơn và số liệu từ bên trong khách hàng, bổ sung cho các chỉ số máy chủ đã được cung cấp bởi Amazon EC2. Agent cũng cho phép chúng ta thu thập, tổng hợp và tóm tắt metrics và logs từ các ứng dụng và dịch vụ micro được đóng gói trong container.\nCloudWatch Agent hỗ trợ mô hình plugin có tính modular mà các nhà phát triển có thể tận dụng để mở rộng khung gốc của agent.\nCác metrics và logs được gửi đến Amazon CloudWatch để lưu trữ và giám sát. CloudWatch Agent cho phép có cái nhìn sâu hơn về các khối công việc bằng cách thu thập metrics và logs cụ thể cho hệ điều hành và ứng dụng. Trong CloudWatch, chúng ta có thể tạo bảng điều khiển tùy chỉnh, tạo cảnh báo thực hiện các hành động và khắc phục sự cố bằng cách sử dụng Amazon CloudWatch Logs.\nMetrics với độ phân giải cao Mỗi số liệu độ đo là một trong các loại sau:\nĐộ phân giải tiêu chuẩn, với dữ liệu có độ chi tiết trên phút\nĐộ phân giải cao, với dữ liệu có độ chi tiết trên giây\nCác metrics được tạo bởi các dịch vụ AWS mặc định là độ phân giải tiêu chuẩn. Khi bạn xuất bản một metrics tùy chỉnh, bạn có thể xác định nó là độ phân giải tiêu chuẩn hoặc độ phân giải cao. Khi bạn xuất bản một metrics độ phân giải cao, CloudWatch lưu trữ nó với độ phân giải 1 giây và bạn có thể đọc và truy xuất nó với chu kỳ 1 giây, 5 giây, 10 giây, 30 giây hoặc bất kỳ bội số nào của 60 giây.\nMetrics độ phân giải cao có thể cung cấp cái nhìn tức thì hơn về hoạt động trong vòng dưới một phút của ứng dụng của bạn. Hãy lưu ý rằng mỗi lệnh PutMetricData cho một metrics tùy chỉnh sẽ bị tính phí, do đó gọi PutMetricData thường xuyên hơn cho một metrics độ phân giải cao có thể dẫn đến việc tính phí cao hơn. Để biết thêm thông tin về giá CloudWatch, xem Bảng giá Amazon CloudWatch.\nNếu bạn thiết lập một cảnh báo trên một metrics độ phân giải cao, bạn có thể chỉ định một cảnh báo độ phân giải cao với chu kỳ 10 giây hoặc 30 giây, hoặc bạn có thể thiết lập một cảnh báo thông thường với chu kỳ bất kỳ bội số nào của 60 giây. Có một mức phí cao hơn cho các cảnh báo độ phân giải cao với chu kỳ 10 hoặc 30 giây.\n"
},
{
	"uri": "/vi/2-preparation/2.1-create-vpc/",
	"title": "Tạo VPC",
	"tags": [],
	"description": "",
	"content": "Tạo VPC cw-agent-vpc Truy cập VPC service management console Click Your VPC. Click Create VPC. Tại trang Create VPC. Tại mục Name tag, nhập cw-agent-vpc. Tại mục IPv4 CIDR, nhập 10.0.0.0/16. Click Create VPC. Bước tiếp theo chúng ta sẽ tạo subnet trong VPC.\n"
},
{
	"uri": "/vi/3-install-config-cwagent/3.2-config-cwagent/",
	"title": "Cấu hình CloudWatch Agent",
	"tags": [],
	"description": "",
	"content": "1. Tạo tệp cấu hình CloudWatch Agent Tạo tệp cấu hình CloudWatch Agent sử dụng trình soạn thảo văn bản ưa thích của bạn.\nsudo nano /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent.json Dán cấu hình cơ bản sau vào file. Tùy chỉnh các metrics and logs bạn muốn thu thập bằng cách thêm hoặc sửa đổi metrics_collected và các phần khác. Tham khảo tài liệu về CloudWatch Agent để biết các tùy chọn cấu hình chi tiết.\n{ \u0026#34;agent\u0026#34;: { \u0026#34;run_as_user\u0026#34;: \u0026#34;cwagent\u0026#34; }, \u0026#34;metrics\u0026#34;: { \u0026#34;namespace\u0026#34;: \u0026#34;WorkshopCWAgent\u0026#34;, \u0026#34;metrics_collected\u0026#34;: { \u0026#34;cpu\u0026#34;: { \u0026#34;resources\u0026#34;: [ \u0026#34;*\u0026#34; ], \u0026#34;measurement\u0026#34;: [ \u0026#34;cpu_usage_guest\u0026#34; ], \u0026#34;metrics_collection_interval\u0026#34;: 60, \u0026#34;totalcpu\u0026#34;: false }, \u0026#34;mem\u0026#34;: { \u0026#34;measurement\u0026#34;: [ \u0026#34;mem_used_percent\u0026#34; ], \u0026#34;metrics_collection_interval\u0026#34;: 60 } }, \u0026#34;append_dimensions\u0026#34;: { \u0026#34;ImageId\u0026#34;: \u0026#34;${aws:ImageId}\u0026#34;, \u0026#34;InstanceId\u0026#34;: \u0026#34;${aws:InstanceId}\u0026#34;, \u0026#34;InstanceType\u0026#34;: \u0026#34;${aws:InstanceType}\u0026#34;, \u0026#34;AutoScalingGroupName\u0026#34;: \u0026#34;${aws:AutoScalingGroupName}\u0026#34; }, \u0026#34;aggregation_dimensions\u0026#34;: [ [ \u0026#34;InstanceId\u0026#34; ] ] } } 2. Lưu trữ file cấu hình trong AWS Systems Manager Parameter Store Parameter Store cho phép bạn lưu trữ dữ liệu cấu hình và ứng dụng một cách an toàn.\nVào AWS Systems Manager rồi chọn Parameter Store. Click vào nút Create parameter để tạo một parameter mới. Cấu hình Parameter: Tiền tố của tên parameter phải là \u0026lsquo;AmazonCloudWatch-\u0026rsquo;.\nNhập tên cho parameter: AmazonCloudWatch-Agent-EC2-Configuration. Thêm mô tả: CloudWatch Agent configuration. Chọn bậc parameter Standard. Đối với kiểu parameter chọn String. Đối với kiểu dữ liệu, chọn text. Nhập cấu hình json ở phần 1 vào Value. Click Create parameter 3. Áp dụng cấu hình tùy chọn -s có nghĩa là khởi động lại Cloudwatch Agent sau khi định cấu hình cấu hình agent\nFile cấu hình trên máy cục bộ: sudo amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -s -c file:/opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent.json File cấu hình trên Systems Manager Parameter Store: sudo amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -s -c ssm:AmazonCloudWatch-Agent-EC2-Configuration Sau khi cài đặt và định cấu hình CloudWatch Agent đã hoàn tất, chúng ta sẽ cấu hình các metric có độ phân giải cao trong bước tiếp theo.\n"
},
{
	"uri": "/vi/2-preparation/",
	"title": "Chuẩn bị VPC và EC2",
	"tags": [],
	"description": "",
	"content": "\rBạn cần tạo 1 Linux instance trên public subnet để thực hiện bài lab này.\nAmazon Web Services (AWS) offers a comprehensive set of tools to build and manage cloud infrastructure. In this guide, we will walk through the process of creating a Virtual Private Cloud (VPC) with 1 public subnet, then launching an Amazon Elastic Compute Cloud (EC2) instance located in the public subnet within the VPC, creating an IAM (Identity and Access Management) role for EC2 to send data to Amazon CloudWatch.\nThe architecture overview after you complete this step will be as follows:\nAmazon Web Services (AWS) cung cấp một bộ công cụ toàn diện để xây dựng và quản lý cơ sở hạ tầng đám mây. Trong hướng dẫn này, chúng ta sẽ hướng dẫn qua quy trình tạo một Mạng Riêng Ảo (VPC) với 1 public subnet, sau đó khởi chạy một thể hiện Amazon Elastic Compute Cloud (EC2) nằm trong public subnet trong VPC, tạo một IAM role (Quản lý danh tính và Truy cập) cho EC2 để gửi dữ liệu đến Amazon CloudWatch.\nTổng quan kiến trúc sau khi bạn hoàn thành bước này sẽ như sau:\nNội dung 2.1. Tạo VPC\n2.2. Tạo public subnet\n2.3. Tạo security group\n2.4. Tạo IAM role\n2.5. Tạo EC2 instance\n"
},
{
	"uri": "/vi/2-preparation/2.2-create-public-subnet/",
	"title": "Tạo public subnet",
	"tags": [],
	"description": "",
	"content": "Tạo Public Subnet Click Subnets. Click Create subnet. Tại trang Create subnet. Trong phần VPC ID, click cw-agent-vpc. Tại mục Subnet name, nhập cw-agent-public-subnet-01. Trong phần Availability Zone, chọn Availability zone đầu tiên. Tại mục IPv4 CIRD block nhập 10.0.1.0/24. Cuộn xuống dưới cùng, click Create subnet.\nClick cw-agent-public-subnet-01.\nClick Actions. Click Edit subnet settings. Click Enable auto-assign public IPv4 address. Click Save. Click Internet Gateways. Click Create internet gateway. Tại trang Create internet gateway. Tại mục Name tag, nhập cw-agent-igw. Click Create internet gateway. Sau khi tạo thành công, click Actions. Click Attach to VPC. Tại trang Attach to VPC. Trong phần Available VPCs, chọn cw-agent-vpc. Click Attach internet gateway. Kiểm tra quá trình đính kèm thành công như hình bên dưới. Tiếp theo, chúng ta sẽ tạo một custom route table để gán cho cw-agent-public-subnet-01. Click Route Tables. Click Create route table. Tại trang Create route table. Tại mục Name, nhập cw-agent-public-rtb. Trong phần VPC, chọn cw-agent-vpc. Click Create route table. Sau khi tạo route table thành công. Click Edit routes. Tại trang Edit routes. Click Add route. Tại mục Destination, nhập 0.0.0.0/0 Trong phần Target, chọn Internet Gateway và chọn cw-agent-igw. Click Save changes. Click Subnet associations tab. Click Edit subnet associations để liên kết custom route table mà chúng ta vừa tạo trong cw-agent-public-subnet-01. Tại trang Edit subnet associations. Click cw-agent-public-subnet-01. Click Save associations. Kiểm tra xem thông tin route table đã được liên kết với cw-agent-public-subnet-01 và thông tin định tuyến internet đã được trỏ tới Internet Gateway như minh họa bên dưới. Bước tiếp theo chúng ta sẽ tạo security group cho EC2 instance.\n"
},
{
	"uri": "/vi/3-install-config-cwagent/",
	"title": "Cài đặt và cấu hình CloudWatch Agent",
	"tags": [],
	"description": "",
	"content": "Trong bước này, chúng ta sẽ cài đặt và định cấu hình CloudWatch Agent cho phép bạn thu thập các metrics và logs tùy chỉnh từ các EC2 instance cũng như on-premises servers của bạn và gửi chúng tới Amazon CloudWatch để theo dõi và phân tích.\nNội dung 3.1. Cài đặt CloudWatch Agent\n3.2. Cấu hình CloudWatch Agent\n"
},
{
	"uri": "/vi/2-preparation/2.3-create-sec-group/",
	"title": "Tạo security group",
	"tags": [],
	"description": "",
	"content": "Trong bước này, chúng ta sẽ tiến hành tạo security group được sử dụng cho các instances của chúng ta. Như bạn có thể thấy, những security group này sẽ cần mở các cổng truyền thống cho ssh như cổng 22.\nTạo security group cho EC2 instance nằm trong public subnet Truy cập VPC service management console Click Security Group. Click Create security group. Tại mục Security group name, nhập EC2ServerSG. Trong phần Description, nhập Security group for EC2 instance. Trong phần VPC, click X rồi chọn cw-agent-vpc bạn đã tạo cho bài lab này. Cấu hình Inbound rules Trong Inbound rules, click Add rule. Chọn Type: SSH và Source: My IP. My IP đại diện cho 1 địa chỉ IPv4 công khai mà bạn đang sử dụng (sẽ thay đổi khi bạn thay đổi mạng). Giữ Outbound rule, cuộn xuống dưới. Click Create security group. Vậy là chúng ta đã hoàn thành việc tạo security group cần thiết cho EC2 instance.\n"
},
{
	"uri": "/vi/4-config-high-resolution-metrics/",
	"title": "Cấu hình phân giải cao",
	"tags": [],
	"description": "",
	"content": "Trường metrics_collection_interval chỉ định khoảng thời gian cho các metrics được thu thập, tính bằng giây. Bằng cách chỉ định giá trị nhỏ hơn 60 cho trường này, các metrics được thu thập dưới dạng metrics phân giải cao.\nVí dụ: nếu tất cả các metrics của bạn phải là phân giải cao và được thu thập 10 giây một lần, hãy chỉ định 10 làm giá trị cho metrics_collection_interval trong phần agent dưới dạng tập hợp metrics toàn cầu.\n{ \u0026#34;agent\u0026#34;: { \u0026#34;metrics_collection_interval\u0026#34;: 10 } } Ngoài ra, ví dụ sau đặt cpu, ram và tất cả các số liệu khác sẽ được thu thập cứ sau 10 giây.\n{ \u0026#34;agent\u0026#34;: { \u0026#34;run_as_user\u0026#34;: \u0026#34;cwagent\u0026#34;, \u0026#34;metrics_collection_interval\u0026#34;: 10 }, \u0026#34;metrics\u0026#34;: { \u0026#34;namespace\u0026#34;: \u0026#34;WorkshopCWAgent\u0026#34;, \u0026#34;metrics_collected\u0026#34;: { \u0026#34;cpu\u0026#34;: { \u0026#34;resources\u0026#34;: [ \u0026#34;*\u0026#34; ], \u0026#34;measurement\u0026#34;: [ \u0026#34;cpu_usage_guest\u0026#34; ], \u0026#34;metrics_collection_interval\u0026#34;: 10, \u0026#34;totalcpu\u0026#34;: false }, \u0026#34;mem\u0026#34;: { \u0026#34;measurement\u0026#34;: [ \u0026#34;mem_used_percent\u0026#34; ], \u0026#34;metrics_collection_interval\u0026#34;: 10 } }, \u0026#34;append_dimensions\u0026#34;: { \u0026#34;ImageId\u0026#34;: \u0026#34;${aws:ImageId}\u0026#34;, \u0026#34;InstanceId\u0026#34;: \u0026#34;${aws:InstanceId}\u0026#34;, \u0026#34;InstanceType\u0026#34;: \u0026#34;${aws:InstanceType}\u0026#34;, \u0026#34;AutoScalingGroupName\u0026#34;: \u0026#34;${aws:AutoScalingGroupName}\u0026#34; }, \u0026#34;aggregation_dimensions\u0026#34;: [ [ \u0026#34;InstanceId\u0026#34; ] ] } } Cập nhật cấu hình CloudWatch Agent Truy cập vào AWS Systems Manager rồi chọn Parameter Store. Click AmazonCloudWatch-Agent-EC2-Configuration parameter. Click Edit. Nhập Cấu hình phân giải cao bên trên vào Value, rồi click Save changes. Tải lại và khởi động lại cấu hình CloudWatch Agent trong EC2 instance. sudo amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -s -c ssm:AmazonCloudWatch-Agent-EC2-Configuration Hãy nhớ rằng bất cứ khi nào bạn thay đổi cấu hình tác nhân trên SSM Parameter Store, bạn phải tìm nạp lại và khởi động lại cấu hình để các thay đổi có hiệu lực.\nSau khi đã định cấu hình thành công các metrics có độ phân giải cao, bước tiếp theo của chúng tôi là giám sát và phân tích các metrics này.\n"
},
{
	"uri": "/vi/2-preparation/2.4-create-iam-role/",
	"title": "Tạo IAM Role",
	"tags": [],
	"description": "",
	"content": "Tạo IAM Role Ở bước này, chúng ta sẽ tiến hành tạo IAM Role. Trong IAM Role này, policy AmazonSSMManagedInstanceCore sẽ được chỉ định, đây là policy cho phép máy chủ EC2 giao tiếp với Session Manager để lưu cấu hình của CloudWatch Agent.\nTruy cập IAM service administration interface\nTrong thanh điều hướng bên trái, click Roles, rồi click Create role.\nClick AWS service, rồi click EC2, và sau đó click Next. Trong Search box, nhập CloudWatchAgentAdminPolicy và nhấn Enter để tìm kiếm policy này. Click policy CloudWatchAgentAdminPolicy. Click Next Nhâp EC2CWAgentRole trong mục Role Name. Click Create Role. Vậy là chúng ta đã hoàn tất việc tạo IAM role cần thiết cho EC2 instance.\n"
},
{
	"uri": "/vi/5-monitor-and-analysis-in-cloudwatch/",
	"title": "Giám sát và phân tích trong CloudWatch",
	"tags": [],
	"description": "",
	"content": " Truy cập vào AWS CloudWatch, rồi chọn All metrics. Trong phần Custom namespaces, click WorkshopCWAgent. Click InstanceId. Chọn RAM metrics. Chọn Metric name có giá trị mem_used_percent. Rồi click Graphed metrics. Chọn Period giá trị là 10 seconds. Chọn khoảng thời gian là 3 phút. Số liệu mỗi 10 giây. Cấu hình bảng điều khiển tự động làm mới mỗi 10 giây. Thêm vào dashboard. Tạo dashboard mới. Nhập tên, và click Create. Click Add to dashboard. Truy cập vào cw-agent-dashboard. Bạn có thể chọn giữ lại tất cả các tài nguyên này cho bài lab sắp tới hoặc tiến hành dọn dẹp trong bước sau.\n"
},
{
	"uri": "/vi/2-preparation/2.5-create-ec2/",
	"title": "Tạo EC2 instance",
	"tags": [],
	"description": "",
	"content": " Truy cập EC2 service management console Click Instances. Click Launch instances. Tại mục Name, nhập Server. Trong phần Application and OS Images (Amazon Machine Image). Click Amazon Machine Image (AMI) danh sách thả xuống sau đó chọn AMI Amazon Linux 2 AMI. Trong phần Instance Type. Click Instance type danh sách thả xuống sau đó chọn t2.micro. Trong phần Key pair (login). Click Create new key pair. Tại mục Key pair name, nhập server rồi click Create key pair. Click Key pair name danh sách thả xuống sau đó chọn server key pair. Trong phần Network settings. Click Edit. Cấu hình Network settings. Trong phần Advanced details. Click IAM instance profile danh sách thả xuống sau đó chọn EC2CWAgentRole. Trong phần Summary. Click Launch instance. Quá trình chuẩn bị VPC và EC2 instance cho CloudWatch hiện đã hoàn tất. Bước tiếp theo, chúng ta sẽ cài đặt và cấu hình Cloudwatch Agent trong EC2 instance.\n"
},
{
	"uri": "/vi/6-cleanup/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "Chúng ta sẽ thực hiện các bước sau để xóa các tài nguyên mà chúng ta đã tạo trong bài lab này.\nXóa EC2 instance Truy cập EC2 service management console Click Instances. Chọn server instance. Click Instance state. Click Terminate instance, rồi click Terminate để xác nhận. Xóa IAM Role Truy cập IAM service management console Click Roles. Trong search box, nhập EC2CWAgentRole. Click để chọn EC2CWAgentRole. Click Delete, rồi nhập role name EC2CWAgentRole và click Delete để xóa role. Xóa VPC Truy cập VPC service management console\nClick Your VPCs. Click cw-agent-vpc. Click Actions. Click Delete VPC. Trong hộp xác nhận, nhập delete để xác nhận, nhấp vào Delete để xóa cw-agent-vpc và các tài nguyên liên quan. "
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]